# argparse

```py
import argparse

parser = argparse.ArgumentParser(description='test')

parser.add_argument('--sparse', action='store_true', default=False, help='GAT with sparse version or not.')
parser.add_argument('--seed', type=int, default=72, help='Random seed.')
parser.add_argument('--epochs', type=int, default=10000, help='Number of epochs to train.')

args = parser.parse_args()

print(args.sparse)
print(args.seed)
print(args.epochs)
```

`argparse`，在对象中通过`add_argument`添加参数，这些参数会在接下来的程序中使用到（类似于定义变量），不过与变量不同的是，通过这种方法设置的参数，可以在程序执行之前，即命令行中指定其值，从而可以方便的更改大小，而不需要改动源文件。

**add_argument() 方法定义如何解析命令行参数：**
`ArgumentParser.add_argument(["name1"][,"name2"]...[, action][, nargs][, const][, default][, type][, choices][, required][, help][, metavar][, dest])`

每个参数解释如下：

- `name or flags`，选项字符串的名字或者列表，例如 foo 或者 -f, --foo。名字可以起多个，随便哪一个都能用
- `action`，命令行遇到参数时的动作，默认值是 store
- `store_const`，表示赋值为const
- `append`，将遇到的值存储成列表，也就是如果参数重复则会保存多个值;
- `append_const`，将参数规范中定义的一个值保存到一个列表；
- `count`，存储遇到的次数；此外，也可以继承 argparse.Action 自定义参数解析；
- `nargs` ，应该读取的命令行参数个数，可以是具体的数字，或者是?号，当不指定值时对于 Positional argument 使用 default，对于 Optional argument 使用 const；或者是 * 号，表示 0 或多个参数；或者是 + 号表示 1 或多个参数。
- `const `，action 和 nargs 所需要的常量值。
- `default` ，不指定参数时的默认值。
- `type `， 命令行参数应该被转换成的类型。
- `choices`，参数可允许的值的一个容器。
- `required`，可选参数是否可以省略 (仅针对可选参数)。
- `help`，参数的帮助信息，当指定为 argparse.SUPPRESS 时表示不显示该参数的帮助信息.
- `metavar`，在 usage 说明中的参数名称，对于必选参数默认就是参数名称，对于可选参数默认是全大写的参数名称.
- `dest`，解析后的参数名称，默认情况下，对于可选参数选取最长的名称，中划线转换为下划线.

![在这里插入图片描述](https://zyc-learning-1309954661.cos.ap-nanjing.myqcloud.com/machine-learning-pic/20200603133407461.png)

在执行前，通过`[参数名] [value]`的形式指定参数大小，如不指定，则给该参数默认大小

如果不想给参数，直接使用默认值，则需要在`add_argument`时加上`narg='?'`：

```py
parser.add_argument('-o', '--out', nargs='?',default=None)
```

